# BiliBili å¼¹å¹•/è§†é¢‘ä¸‹è½½è½¯ä»¶
- [BiliBili å¼¹å¹•/è§†é¢‘ä¸‹è½½è½¯ä»¶](#bilibili-å¼¹å¹•è§†é¢‘ä¸‹è½½è½¯ä»¶)
  * [ç®€ä»‹](#ç®€ä»‹)
  * [ä¾èµ–åº“](#ä¾èµ–åº“)
    + [JavaScriptä¾èµ–åº“](#javascriptä¾èµ–åº“)
  * [é…ç½®æ–‡ä»¶](#é…ç½®æ–‡ä»¶)
    + [cookies.json](#cookiesjson)
    + [settings.json](#settingsjson)
    + [webui.json](#webuijson)
    + [sections.json](#sectionsjson)
    + [tv.bilibili.player.xml](#tvbilibiliplayerxml)
  * [å¼€å§‹ä½¿ç”¨](#å¼€å§‹ä½¿ç”¨)
    + [prepare.py](#preparepy)
    + [è¿‡æ»¤å¼¹å¹•](#è¿‡æ»¤å¼¹å¹•)
  * [ç¿»è¯‘](#ç¿»è¯‘)
  * [å…¶ä»–](#å…¶ä»–-1)
    + [å…¨å¼¹å¹•ä¸‹è½½é—®é¢˜](#å…¨å¼¹å¹•ä¸‹è½½é—®é¢˜)
  * [å·²çŸ¥BUG](#å·²çŸ¥bug)
    + [ä¸€ç›´å‡ºç°ä¿å­˜å†…å®¹è‡³æ–‡ä»¶å¤±è´¥æˆ–æ˜¾ç¤ºcgiåº“escapeå‡ºé”™](#ä¸€ç›´å‡ºç°ä¿å­˜å†…å®¹è‡³æ–‡ä»¶å¤±è´¥æˆ–æ˜¾ç¤ºcgiåº“escapeå‡ºé”™)
    + [ç™»å½•æ—¶å‘ç”Ÿé”™è¯¯ï¼ˆä½¿ç”¨ChromeDriveræ—¶ï¼‰](#ç™»å½•æ—¶å‘ç”Ÿé”™è¯¯ä½¿ç”¨chromedriveræ—¶)
  * [FAQ](#faq)
    + [æ— æ³•è¾“å…¥å¯†ç ](#æ— æ³•è¾“å…¥å¯†ç )
    + [å¤§ä¼šå‘˜è´¦å·æç¤ºä»…å¤§ä¼šå‘˜å¯ä»¥è§‚çœ‹](#å¤§ä¼šå‘˜è´¦å·æç¤ºä»…å¤§ä¼šå‘˜å¯ä»¥è§‚çœ‹)
## ç®€ä»‹
ç¨‹åºç”¨python(python3)è¯­è¨€ç¼–å†™è€Œæˆï¼Œä½¿ç”¨äº†éƒ¨åˆ†pythonåº“å’ŒChromeDriverã€‚   
è½¯ä»¶åªæœ‰æ§åˆ¶å°ç•Œé¢ï¼ŒèŒæ–°ä¸ä¼šå¯ä»¥çœ‹[è¿™é‡Œ](easyuse.md)   
ç°åœ¨å·²æ”¯æŒå‘½ä»¤è¡Œ  
RELEASEæ„å»ºè„šæœ¬è§[bili.build.bat](https://github.com/lifegpc/bili.build.bat)ã€‚
## ä¾èµ–åº“
[requests](https://pypi.org/project/requests/)   
[selenium](https://pypi.org/project/selenium/)  
[rsa](https://pypi.org/project/rsa/)  
[polib](https://pypi.org/project/polib/)  
[web.py](https://webpy.org/)  
[regex](https://pypi.org/project/regex/)  
[iso-639](https://pypi.org/project/iso-639/)  
è‡ªå·±å†™çš„fileåº“   
å¦‚éœ€è‡ªåŠ¨åˆæˆè§†é¢‘ï¼Œéœ€è¦å½“å‰ç›®å½•å†…æˆ–è€…ç¯å¢ƒå˜é‡PATHç›®å½•å†…æœ‰ffmpegã€‚   
å¦‚éœ€ä½¿ç”¨aria2ä¸‹è½½è§†é¢‘ï¼Œéœ€è¦å½“å‰ç›®å½•å†…æˆ–è€…ç¯å¢ƒå˜é‡PATHç›®å½•å†…æœ‰aria2cã€‚  
ç”¨æˆ·åå¯†ç ç™»å½•éƒ¨åˆ†å‚è€ƒäº†[Bilibili-Toolkit](https://github.com/Hsury/Bilibili-Toolkit)çš„ç™»å½•éƒ¨åˆ†ä»£ç ã€‚  
~~è¯†åˆ«Captchaä½¿ç”¨äº†[è¯¥æ¥å£](https://bili.dev:2233/captcha)ã€‚~~ï¼ˆæ¥å£å·²æŒ‚ï¼‰
### JavaScriptä¾èµ–åº“
[jQuery](https://jquery.com/)  
[js-sha256](https://github.com/emn178/js-sha256)  
[jsbn](http://www-cs-students.stanford.edu/~tjw/jsbn/)ï¼ˆæ³¨ï¼šå·²è¢«åˆå¹¶åˆ°```webuihtml/js(origin)/rsa.js```ï¼‰  
[js-base64](https://github.com/dankogai/js-base64)  
[QRCode.js](https://github.com/davidshimjs/qrcodejs)  
[Viewer.js](https://github.com/fengyuanchen/viewerjs)  
[clipboard.js](https://github.com/zenorocha/clipboard.js)  
[FileSaver.js](https://github.com/eligrey/FileSaver.js)
## é…ç½®æ–‡ä»¶
### cookies.json
è¯¥æ–‡ä»¶ä¿å­˜äº†ç™»å½•Bç«™åè·å–åˆ°çš„cookiesä¿¡æ¯ï¼Œç”¨äºç¨‹åºä¿æŒç™»å½•Bç«™ï¼ˆè°ƒç”¨å†å²å¼¹å¹•æ¥å£ç”¨ä»¥åŠä¸‹è½½720PåŠä»¥ä¸Šè§†é¢‘ä½¿ç”¨ï¼‰   

### settings.json
è¯¥æ–‡ä»¶ä¿å­˜äº†ä¸€äº›é»˜è®¤æ“ä½œçš„è®¾ç½®ï¼Œå¯ä»¥è¿è¡Œ**setsettings.py**æ¥è®¾ç½®ã€‚

### webui.json
ä¿å­˜äº†WEBç”¨æˆ·ç•Œé¢çš„è®¾ç½®ã€‚

### sections.json
å½“WEBç”¨æˆ·ç•Œé¢æ‰“å¼€å¯†ç éªŒè¯æ—¶ï¼Œå­˜å‚¨ä¼šè¯ä¿¡æ¯ã€‚

### tv.bilibili.player.xml
è¯¥æ–‡ä»¶ä¸ä¸€å®šéœ€è¦   
ä¸»è¦ç”¨æ¥å¯¹å¼¹å¹•è¿›è¡Œè¿‡æ»¤ã€‚   
å¯ä»¥ç›´æ¥å°†åœ¨PCç½‘é¡µç«¯æ’­æ”¾å™¨çš„å¼¹å¹•è¿‡æ»¤è®¾å®šä¸­å¯¼å‡ºçš„æ–‡ä»¶æ”¾è‡³ç¨‹åºç›®å½•ä¸‹ï¼Œå¹¶ç¡®ä¿æ–‡ä»¶åä¸º**tv.bilibili.player.xml**ã€‚

## å¼€å§‹ä½¿ç”¨
ç›´æ¥è¿è¡Œstart.pyå³å¯

### prepare.py
è¿è¡Œåå¯ä»¥å–å¾—è¿è¡ŒWEBç”¨æˆ·ç•Œé¢å¿…é¡»çš„ä¸€äº›æ–‡ä»¶ã€‚  
è¿è¡Œæ—¶ç¡®ä¿å¯ä»¥ç›´æ¥è®¿é—®```java```ã€‚  
ç”±äºæ­»ğŸ´çš„Cloudflareçš„é˜²BOTæ£€æµ‹ï¼Œç°åœ¨å·²ç»æ— æ³•è‡ªåŠ¨æ›´æ–°/ä¸‹è½½```compiler.jar```ï¼Œè¯·å»[è¿™é‡Œ](https://mvnrepository.com/artifact/com.google.javascript/closure-compiler/latest)ä¸‹è½½```compiler.jar```ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶å°†æ— æ³•è¿›è¡Œç¼–è¯‘ã€‚

### WEBç”¨æˆ·ç•Œé¢
è¿è¡Œ**startwebui.py**åï¼Œå¯ä»¥åœ¨æµè§ˆå™¨è®¿é—®ã€‚  
é»˜è®¤åœ°å€ä¸º```http://localhost:8080```ã€‚

### è¿‡æ»¤å¼¹å¹•
è¿è¡Œfilter.pyå³å¯   
æ³¨æ„ï¼šå¿…é¡»è¦æœ‰**tv.bilibili.player.xml**æ–‡ä»¶æ‰èƒ½è¿›è¡Œå¼¹å¹•è¿‡æ»¤ã€‚

## ç¿»è¯‘
ä½ å¯ä»¥åœ¨[Transifex](https://www.transifex.com/lifegpc/bili/)ä¸Šä¸ºè¯¥ç¨‹åºæä¾›ç¿»è¯‘ã€‚  
æ„Ÿè°¢Kum4423æä¾›æ—¥è¯­ç¿»è¯‘ã€‚

## å…¶ä»–
å®Œç¾æ”¯æŒ**æ™®é€šè§†é¢‘**çš„å¼¹å¹•ä¸‹è½½   
ç°å·²æ”¯æŒ**SSå·ï¼ˆç•ªå‰§ï¼‰**çš„æ™®é€šå¼¹å¹•å’Œå…¨å¼¹å¹•ä¸‹è½½ï¼Œä½†å…¨å¼¹å¹•ä¸‹è½½**å¼€å§‹æ—¶é—´**[å¯èƒ½](#b)éœ€è¦**æ‰‹åŠ¨è°ƒæ•´**ï¼ˆç›®å‰æš‚æœªå‘ç°æ¯1Pçš„å…·ä½“æ—¶é—´æˆ³ï¼‰   
**å…¨å¼¹å¹•ä¸‹è½½å»ºè®®ä½¿ç”¨è‡ªåŠ¨æ¨¡å¼ï¼Œä¸å»ºè®®è‡ªå·±è¾“å…¥é—´éš”å¤©æ•°**   
<a name='b'></a>æ³¨ï¼šç¬¬1Pä¸€èˆ¬æ˜¯å‡†ç¡®çš„ã€‚

### å…¨å¼¹å¹•ä¸‹è½½é—®é¢˜
ç”±äºBç«™é™åˆ¶äº†å†å²å¼¹å¹•çš„è°ƒç”¨æ¬¡æ•°ï¼Œå¤§æ¦‚12hå†…å¯ä»¥è°ƒç”¨1000æ¬¡å·¦å³ï¼Œæ‰€ä»¥åœ¨å¼¹å¹•è¾ƒå¤šçš„æ—¶å€™è¯·è®¾å®šè¾ƒå¤§çš„æ—¶é—´é—´éš”ã€‚   
è¢«é™åˆ¶åå¤§çº¦12håä¼šæ¢å¤æ­£å¸¸

## å·²çŸ¥BUG

### ä¸€ç›´å‡ºç°ä¿å­˜å†…å®¹è‡³æ–‡ä»¶å¤±è´¥æˆ–æ˜¾ç¤ºcgiåº“escapeå‡ºé”™
å…¨å¼¹å¹•ä¸‹è½½ä¸€ç›´å‡ºç°**ä¿å­˜å†…å®¹è‡³æ–‡ä»¶å¤±è´¥**æˆ–æ˜¾ç¤º**cgiåº“escapeå‡ºé”™**   
åŸå› ï¼š  
**BiliDanmuCreate.py**ä¸‹cgiæ²¡æœ‰æ­£ç¡®å¼•ç”¨**escape()**   
ä½ç‰ˆæœ¬pythonå¯ä»¥ä½¿ç”¨cgi.escape()è€Œé«˜ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨cgi.html.escape()

### ç™»å½•æ—¶å‘ç”Ÿé”™è¯¯ï¼ˆä½¿ç”¨ChromeDriveræ—¶ï¼‰
è¿™æ˜¯ç”±äºä½ çš„ç”µè„‘æœªå®‰è£…Chromeæˆ–è€…Chromeç‰ˆæœ¬ä¸Chrome Driverç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œè¯·å®‰è£…Chromeæˆ–ä¸‹è½½åŒ¹é…Chromeç‰ˆæœ¬çš„Chrome Driverã€‚  
**å¯ä»¥åˆ°è¿™é‡Œ[ä¸‹è½½](https://chromedriver.chromium.org/downloads)Chrome Driverçš„å…¶ä»–ç‰ˆæœ¬**  
å…·ä½“çš„é”™è¯¯æç¤ºå¯ä»¥å‚è€ƒ[#9](https://github.com/lifegpc/bili/issues/9)å’Œ[#11](https://github.com/lifegpc/bili/issues/11)ã€‚  
ç°åœ¨å·²ç»æ”¯æŒç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚

## FAQ

### æ— æ³•è¾“å…¥å¯†ç 
è¿™æ˜¯ç”±äºè¾“å…¥å¯†ç æ—¶å…³é—­äº†è¾“å…¥å†…å®¹åœ¨å±å¹•ä¸Šè¾“å‡ºï¼ˆå›æ˜¾ï¼‰å¯¼è‡´çš„ã€‚  
è§£å†³æ–¹æ³•æ˜¯ç›´æ¥æ­£å¸¸è¾“å…¥å¯†ç åæŒ‰å›è½¦é”®å³å¯ã€‚

### å¤§ä¼šå‘˜è´¦å·æç¤ºä»…å¤§ä¼šå‘˜å¯ä»¥è§‚çœ‹
å…ˆåˆ é™¤```cookies.json```ï¼Œç„¶åä½¿ç”¨Chrome Driverç™»å½•ï¼Œä¸è¦ä½¿ç”¨WEB UIç™»å½•ã€‚ï¼ˆWEB UIç™»å½•ç›®å‰å­˜åœ¨BUGï¼‰
